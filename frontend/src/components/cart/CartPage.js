import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { ArrowLeft, Minus, Plus, ShoppingCart, Trash2 } from 'lucide-react';
import { useNavigate } from 'react-router-dom';
import { formatPrice } from '../../utils/utils';
import { ImageWithFallback } from '../figma/ImageWithFallback';
import { Badge } from '../ui/badge';
import { Button } from '../ui/button';
import { Card } from '../ui/card';
import { Checkbox } from '../ui/checkbox';
import { Separator } from '../ui/separator';
export function CartPage({ items, onUpdateQuantity, onRemoveItem, onToggleSelectItem, onSelectAllItems, onDeselectAllItems, selectedTotalPrice, selectedItems, onCheckout, onBack }) {
    const navigate = useNavigate();
    const allSelected = items.length > 0 && items.every(item => item.selected);
    const selectedCount = selectedItems.length;
    const handleNavigateToCheckout = () => {
        if (selectedCount === 0) {
            return;
        }
        // Navigate to checkout with selected items
        navigate('/checkout', {
            state: {
                items: selectedItems,
            },
        });
    };
    return (_jsxs("div", { className: "min-h-screen bg-background", children: [_jsx("div", { className: "sticky top-0 z-40 bg-card border-b border-border", children: _jsx("div", { className: "container mx-auto px-4 py-4", children: _jsxs("div", { className: "flex items-center gap-4", children: [_jsxs(Button, { variant: "ghost", size: "sm", onClick: onBack, className: "gap-2", children: [_jsx(ArrowLeft, { className: "w-4 h-4" }), "Quay l\u1EA1i"] }), _jsx("h1", { className: "text-2xl font-semibold", children: "Gi\u1ECF h\u00E0ng c\u1EE7a b\u1EA1n" }), _jsxs(Badge, { variant: "secondary", className: "ml-2", children: [items.length, " s\u1EA3n ph\u1EA9m"] })] }) }) }), _jsx("div", { className: "container mx-auto px-4 py-8", children: items.length === 0 ? (
                // Empty cart
                _jsx(Card, { className: "p-12", children: _jsxs("div", { className: "text-center", children: [_jsx(ShoppingCart, { className: "w-24 h-24 mx-auto mb-4 text-muted-foreground" }), _jsx("h2", { className: "text-2xl mb-2", children: "Gi\u1ECF h\u00E0ng tr\u1ED1ng" }), _jsx("p", { className: "text-muted-foreground mb-6", children: "H\u00E3y th\u00EAm s\u1EA3n ph\u1EA9m v\u00E0o gi\u1ECF h\u00E0ng \u0111\u1EC3 ti\u1EBFp t\u1EE5c mua s\u1EAFm" }), _jsx(Button, { onClick: onBack, className: "bg-primary hover:bg-primary/90", children: "Ti\u1EBFp t\u1EE5c mua s\u1EAFm" })] }) })) : (_jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-8", children: [_jsxs("div", { className: "lg:col-span-2 space-y-4", children: [_jsx(Card, { className: "p-4", children: _jsxs("div", { className: "flex items-center justify-between", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx(Checkbox, { id: "select-all", checked: allSelected, onCheckedChange: (checked) => {
                                                            if (checked) {
                                                                onSelectAllItems();
                                                            }
                                                            else {
                                                                onDeselectAllItems();
                                                            }
                                                        } }), _jsxs("label", { htmlFor: "select-all", className: "cursor-pointer select-none", children: ["Ch\u1ECDn t\u1EA5t c\u1EA3 (", items.length, " s\u1EA3n ph\u1EA9m)"] })] }), _jsxs("span", { className: "text-sm text-muted-foreground", children: [selectedCount, " s\u1EA3n ph\u1EA9m \u0111\u00E3 ch\u1ECDn"] })] }) }), items.map((item) => (_jsx(Card, { className: `group relative p-4 transition-all duration-200 ${item.selected
                                        ? "border-primary shadow-md"
                                        : "border-border hover:border-primary/20"}`, children: _jsxs("div", { className: "flex gap-4", children: [_jsx("div", { className: "flex items-start pt-2", children: _jsx(Checkbox, { id: `item-${item.id}`, checked: item.selected || false, onCheckedChange: () => onToggleSelectItem(item.id) }) }), _jsx("div", { className: "w-24 h-24 rounded-lg overflow-hidden bg-muted flex-shrink-0", children: _jsx(ImageWithFallback, { src: item.image, alt: item.name, className: "w-full h-full object-cover transition-transform duration-200 group-hover:scale-105" }) }), _jsxs("div", { className: "flex-1 min-w-0", children: [_jsxs("div", { className: "flex items-start justify-between gap-4", children: [_jsxs("div", { className: "flex-1", children: [_jsx("h3", { className: "font-medium mb-1 line-clamp-2", children: item.name }), item.variant && (_jsxs("p", { className: "text-sm text-muted-foreground", children: ["Ph\u00E2n lo\u1EA1i: ", item.variant] }))] }), _jsx(Button, { variant: "ghost", size: "sm", onClick: () => onRemoveItem(item.id), className: "text-muted-foreground hover:text-destructive h-8 w-8 p-0", children: _jsx(Trash2, { className: "w-4 h-4" }) })] }), _jsxs("div", { className: "flex items-center justify-between mt-4", children: [_jsxs("div", { className: "flex flex-col", children: [_jsx("span", { className: "font-semibold text-primary", children: formatPrice(item.price) }), item.originalPrice && item.originalPrice > item.price && (_jsx("span", { className: "text-sm text-muted-foreground line-through", children: formatPrice(item.originalPrice) }))] }), _jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Button, { variant: "outline", size: "sm", className: "h-8 w-8 p-0", onClick: () => onUpdateQuantity(item.id, Math.max(1, item.quantity - 1)), disabled: item.quantity <= 1, children: _jsx(Minus, { className: "w-3 h-3" }) }), _jsx("span", { className: "w-12 text-center", children: item.quantity }), _jsx(Button, { variant: "outline", size: "sm", className: "h-8 w-8 p-0", onClick: () => onUpdateQuantity(item.id, item.quantity + 1), children: _jsx(Plus, { className: "w-3 h-3" }) })] })] }), _jsx("div", { className: "flex justify-end mt-2", children: _jsxs("span", { className: "text-sm text-muted-foreground", children: ["T\u1ED5ng: ", _jsx("span", { className: "font-semibold text-foreground", children: formatPrice(item.price * item.quantity) })] }) })] })] }) }, item.id)))] }), _jsx("div", { className: "lg:col-span-1", children: _jsxs(Card, { className: "p-6 sticky top-24", children: [_jsx("h2", { className: "text-lg font-semibold mb-4", children: "T\u00F3m t\u1EAFt \u0111\u01A1n h\u00E0ng" }), _jsx(Separator, { className: "mb-4" }), _jsxs("div", { className: "space-y-3 mb-4", children: [_jsxs("div", { className: "flex items-center justify-between text-sm", children: [_jsx("span", { className: "text-muted-foreground", children: "S\u1ED1 s\u1EA3n ph\u1EA9m \u0111\u00E3 ch\u1ECDn:" }), _jsx("span", { children: selectedCount })] }), _jsxs("div", { className: "flex items-center justify-between text-sm", children: [_jsx("span", { className: "text-muted-foreground", children: "T\u1EA1m t\u00EDnh:" }), _jsx("span", { children: formatPrice(selectedTotalPrice) })] }), _jsxs("div", { className: "flex items-center justify-between text-sm", children: [_jsx("span", { className: "text-muted-foreground", children: "Ph\u00ED v\u1EADn chuy\u1EC3n:" }), _jsx("span", { className: "text-green-600", children: "Mi\u1EC5n ph\u00ED" })] })] }), _jsx(Separator, { className: "mb-4" }), _jsxs("div", { className: "flex items-center justify-between mb-6", children: [_jsx("span", { className: "font-semibold", children: "T\u1ED5ng c\u1ED9ng:" }), _jsx("span", { className: "text-xl font-bold text-primary", children: formatPrice(selectedTotalPrice) })] }), _jsxs(Button, { onClick: handleNavigateToCheckout, disabled: selectedCount === 0, className: "w-full bg-primary hover:bg-primary/90", children: ["Thanh to\u00E1n (", selectedCount, ")"] }), selectedCount === 0 && (_jsx("p", { className: "text-xs text-center text-muted-foreground mt-2", children: "Vui l\u00F2ng ch\u1ECDn s\u1EA3n ph\u1EA9m \u0111\u1EC3 thanh to\u00E1n" }))] }) })] })) })] }));
}
